<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="grp.team7.kelvin.dao.CollectDao">
    <select id="findShopCollectByKeys" 
        resultType="java.lang.Integer">
        SELECT
           shop_id
        FROM
            shopcollect
        WHERE user_id = #{param1} AND shop_id = #{param2}
    </select>

    <select id="findDishCollectById" parameterType="java.lang.Integer"
        resultType="grp.team7.kelvin.entity.Dish">
        SELECT
            *
        FROM
            dish
        WHERE dish_id IN ( SELECT dish_id FROM dishcollect WHERE user_id=#{userId}   )
    </select>

    <select id="findDishCollectByKeys" 
        resultType="java.lang.Integer">
        SELECT
           dish_id
        FROM
            dishcollect
        WHERE user_id = #{param1} AND dish_id = #{param2}
    </select>

    <insert id="addDishCollect" >
        INSERT INTO 
        dishcollect(dish_id,user_id,collect_time)
        VALUES
        (#{param2},#{param1},#{param3})
    </insert>

    <insert id="addShopCollect" >
        INSERT INTO 
        shopcollect(shop_id,user_id,collect_time)
        VALUES
        (#{param2},#{param1},#{param3})
    </insert>
</mapper>

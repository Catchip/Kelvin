<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="grp.team7.kelvin.dao.OrderDao">
    <select id="findByUser" parameterType="java.lang.Integer"
        resultType="grp.team7.kelvin.entity.Order">
        SELECT
            *
        FROM
            order
        WHERE user_id = #{userId}
    </select>

    <select id="findByShop" parameterType="java.lang.Integer"
        resultType="grp.team7.kelvin.entity.Order">
        SELECT
            *
        FROM
            order
        WHERE shop_id = #{shopId}
    </select>

    <select id="findAll" resultType="grp.team7.kelvin.entity.Order">
        SELECT * FROM order
    </select>

    <select id="findByUUID" parameterType="java.lang.Integer"
        resultType="grp.team7.kelvin.entity.Order">
        SELECT
            *
        FROM
            order
        WHERE uuid = #{UUID}
    </select>
    
    
    <insert id="addOrder" keyProperty="orderId" useGeneratedKeys="true"
        parameterType="grp.team7.kelvin.entity.Order">
        INSERT INTO
        order(user_id,shop_id,order_createtime,money,is_consumed,uuid)
        VALUES
        order(#{userId},#{shopId},#{orderCreatetime},#{money},#{isConsumed},#{uuid})
    </insert>
    
    <update id="updateOrder"
        parameterType="grp.team7.kelvin.entity.Order">
        UPDATE order
        <set>
        <if test="userId != null">
        user_id = ${userId}
        </if>
        <if test="shopId != null">
        shop_id = ${shopId}
        </if>
        <if test="orderCreatetime != null">
        order_createtime = #{orderCreatetime},
        </if>
        <if test="money != null">
        money = #{money},
        </if>
        <if test="isConsumed != null">
        isconsumed = #{isConsumed},
        </if>
        </set>
        WHERE order_id = #{orderId}
    </update>
    
    <delete id="deleteOrder" parameterType="java.lang.Integer">
        DELETE FROM order
        WHERE order_id = #{orderId}
    </delete>
    
    
</mapper>
